<div *ngIf="loading">Cargando...</div>
<p *ngIf="err" style="color:#c00">{{ err }}</p>
<p *ngIf="msg" style="color:green">{{ msg }}</p>

<table *ngIf="!loading && items.length > 0" class="cart">
  <thead>
    <tr>
      <th>Producto</th>
      <th class="right">Precio</th>
      <th class="center">Cantidad</th>
      <th class="right">Subtotal</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let it of items">
      <td class="prod">
        <img *ngIf="coverOf(it)" [src]="coverOf(it)" alt="cover" />
        <span>{{ titleOf(it) || idOf(it) }}</span>
      </td>

      <td class="right">
        {{ priceOf(it) | currency:'USD':'symbol' }}
      </td>

      <td class="center">
        <div class="qty">
          <button type="button" (click)="dec(it)">âˆ’</button>
          <input type="number"
                 [value]="it.quantity"
                 min="1"
                 (change)="onQtyChange(it, $any($event.target).value)" />
          <button type="button" (click)="inc(it)">+</button>
        </div>
      </td>

      <td class="right">
        {{ (priceOf(it) * (it.quantity || 1)) | currency:'USD':'symbol' }}
      </td>

      <td class="center">
        <button type="button" class="link" (click)="remove(it)">Eliminar</button>
      </td>
    </tr>
  </tbody>

  <tfoot>
    <tr>
      <th colspan="3" class="right">Total</th>
      <th class="right">{{ total | currency:'USD':'symbol' }}</th>
      <th></th>
    </tr>
  </tfoot>
</table>

<div *ngIf="!loading && items.length === 0">
  <p>No tienes productos en el carrito.</p>
</div>

<div class="actions" *ngIf="!loading && items.length > 0">
  <button type="button" (click)="clear()">Vaciar carrito</button>
</div>
