<section class="wrap" *ngIf="!loading; else loadTpl">
  <h2>Editar mi perfil</h2>

  <form class="card" [formGroup]="form" (ngSubmit)="$event.preventDefault(); submit()">
    <div class="row">
      <label class="col">
        <span>Nombre</span>
        <input type="text" formControlName="name" placeholder="Tu nombre completo">
        <small class="err" *ngIf="form.controls.name.touched && form.controls.name.invalid">
          Ingresa un nombre válido.
        </small>
      </label>

      <label class="col">
        <span>Email</span>
        <input type="email" formControlName="email" placeholder="tucorreo@dominio.com">
        <small class="err" *ngIf="form.controls.email.touched && form.controls.email.invalid">
          Email inválido.
        </small>
      </label>
    </div>

    <div class="row">
      <label class="col">
        <span>Teléfono</span>
        <input type="tel" formControlName="phone" placeholder="3001234567">
      </label>

      <label class="col">
        <span>Edad</span>
        <input type="number" min="0" max="120" formControlName="age" placeholder="25">
      </label>
    </div>

    <div class="row" *ngIf="role === 'psychologist'">
      <label class="col">
        <span>Especialidad</span>
        <input type="text" formControlName="specialty" placeholder="Psicoterapeuta">
      </label>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="saving || form.invalid">
        {{ saving ? 'Guardando…' : 'Guardar cambios' }}
      </button>
    </div>
  </form>
</section>

<ng-template #loadTpl>
  <div class="card muted">Cargando…</div>
</ng-template>
